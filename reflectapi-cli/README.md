# ReflectAPI CLI Tools

Command-line interface for generating client libraries from ReflectAPI schemas.

## Overview

The ReflectAPI CLI provides code generation tools to create client libraries for multiple programming languages from a ReflectAPI schema. It supports generating TypeScript, Rust, and Python clients with full type safety and documentation.

## Installation

Install via cargo:

```bash
cargo install reflectapi-cli
```

Or build from source:

```bash
cargo build --bin reflectapi-cli --release
```

## Usage

### Basic Code Generation

Generate a TypeScript client:

```bash
reflectapi-cli codegen \
    --language typescript \
    --schema api-schema.json \
    --output ./clients/typescript
```

Generate a Python client:

```bash
reflectapi-cli codegen \
    --language python \
    --schema api-schema.json \
    --output ./clients/python
```

Generate a Rust client:

```bash
reflectapi-cli codegen \
    --language rust \
    --schema api-schema.json \
    --output ./clients/rust
```

### Command Reference

```
reflectapi-cli codegen [OPTIONS]

OPTIONS:
    -l, --language <LANGUAGE>    Target language [possible values: typescript, rust, python]
    -s, --schema <SCHEMA>        Path to the ReflectAPI schema JSON file
    -o, --output <OUTPUT>        Output directory for generated client
    -h, --help                   Print help information
```

## Generated Clients

### TypeScript Client

Generates a fully-typed TypeScript client with:
- Native TypeScript interfaces for all API types
- Async/await HTTP client with proper error handling
- Built-in request/response transformation
- Full IntelliSense support

Example usage:
```typescript
import { ApiClient } from './generated-client';

const client = new ApiClient('https://api.example.com');
const user = await client.users.create({ name: 'Alice', email: 'alice@example.com' });
```

### Python Client

Generates a Python client with:
- Pydantic models for type validation
- Async/await support via httpx
- Comprehensive error handling
- Type hints for full IDE support

Example usage:
```python
from generated_client import AsyncApiClient
from generated_client.types import CreateUserRequest

async with AsyncApiClient('https://api.example.com') as client:
    request = CreateUserRequest(name='Alice', email='alice@example.com')
    user = await client.users.create(request)
```

### Rust Client

Generates a Rust client with:
- Strongly-typed structs with serde support
- Async HTTP client using reqwest
- Comprehensive error types
- Full compile-time type safety

Example usage:
```rust
use generated_client::{ApiClient, CreateUserRequest};

let client = ApiClient::new("https://api.example.com");
let request = CreateUserRequest {
    name: "Alice".to_string(),
    email: "alice@example.com".to_string(),
};
let user = client.users().create(request).await?;
```

## Schema Format

The CLI expects a ReflectAPI schema in JSON format. This is typically generated by your ReflectAPI-based Rust application:

```rust
let (schema, _) = builder.build()?;
let schema_json = serde_json::to_string_pretty(&schema)?;
std::fs::write("api-schema.json", schema_json)?;
```

## Features

- **Multi-language support**: Generate clients for TypeScript, Python, and Rust
- **Type safety**: All generated clients maintain full type safety
- **Documentation**: Generated code includes comprehensive documentation
- **Error handling**: Proper error types and handling for each language
- **Async support**: All clients support async/await patterns
- **Customizable**: Configurable output formatting and structure

## Development

Build the CLI:

```bash
cargo build --bin reflectapi-cli
```

Run tests:

```bash
cargo test --bin reflectapi-cli
```

